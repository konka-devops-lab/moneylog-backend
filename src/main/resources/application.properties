# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
server.port=${PORT:8080}
server.address=${HOST:0.0.0.0}

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:3306/${DB_NAME:crud_db}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${REDIS_SSL:true}
spring.data.redis.timeout=10000ms

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
app.allowed-origin=${ALLOWED_ORIGIN:}

# # ============================================================================
# # MONITORING & OBSERVABILITY CONFIGURATION (UPDATED - NO OPENTELEMETRY DEPS)
# # ============================================================================

# # Spring Boot Actuator for Monitoring (VENDOR INDEPENDENT)
# management.endpoints.web.exposure.include=health,info,metrics,prometheus,loggers
# management.endpoint.health.show-details=when-authorized
# management.endpoint.prometheus.enabled=true

# # Metrics Configuration
# management.metrics.export.prometheus.enabled=true
# management.metrics.tags.application=crud-app
# management.metrics.distribution.percentiles-histogram.http.server.requests=true
# management.metrics.distribution.sla.http.server.requests=100ms,500ms,1s,2s

# # Custom Metrics (Automatically enabled by Spring Boot)
# management.metrics.enable.jvm=true
# management.metrics.enable.logback=true
# management.metrics.enable.redis=true
# management.metrics.enable.jdbc=true

# # Application-specific metric settings
# management.metrics.enable.process=true
# management.metrics.enable.system=true
# management.metrics.enable.http=true

# # ============================================================================
# # LOGGING CONFIGURATION (ENHANCED - SIMPLIFIED)
# # ============================================================================
# logging.level.com.example.crudapp=INFO
# logging.level.org.springframework.data.redis=${REDIS_LOG_LEVEL:WARN}
# logging.level.org.springframework.web=WARN
# logging.level.org.hibernate=WARN

# # Enhanced Logging Patterns with Trace IDs (using MDC)
# logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [traceId=%X{traceId:-}] - %msg%n
# logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [traceId=%X{traceId:-}] - %msg%n

# # Optional: JSON Logging for better parsing
# # logging.pattern.console={"timestamp":"%d{yyyy-MM-dd HH:mm:ss.SSS}", "level":"%level", "thread":"%thread", "logger":"%logger", "message":"%msg", "traceId":"%X{traceId:-}"}%n

# # Log file configuration (optional)
# logging.file.name=/var/log/crud-app.log
# logging.logback.rollingpolicy.max-file-size=10MB
# logging.logback.rollingpolicy.max-history=30

# ============================================================================
# HEALTH CHECK CONFIGURATION (ENHANCED)
# ============================================================================
management.health.redis.enabled=true
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.endpoint.health.probes.enabled=true

# Database connection pool monitoring
management.health.db.enabled=true
management.datasource.hikari.connection-timeout=20000
management.datasource.hikari.maximum-pool-size=10